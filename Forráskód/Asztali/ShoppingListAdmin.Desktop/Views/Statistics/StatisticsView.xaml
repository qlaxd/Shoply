<UserControl x:Class="ShoppingListAdmin.Desktop.Views.Statistics.StatisticsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ShoppingListAdmin.Desktop.Views.Statistics"
             xmlns:viewModel="clr-namespace:ShoppingListAdmin.Desktop.ViewModels.Statistics"
             xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
             d:DataContext="{d:DesignInstance Type=viewModel:StatisticsViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Foreground="White">
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    
    <Grid Margin="10">
        <TabControl>
            <!-- Users Tab -->
            <TabItem Header="Felhasználók">
                <Grid Margin="10">
                    <DataGrid ItemsSource="{Binding UserGrowthByMonth}" AutoGenerateColumns="False" Margin="0,10">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Hónap" Binding="{Binding Month}" Width="*"/>
                            <DataGridTextColumn Header="Új felhasználók" Binding="{Binding NewUsers}" Width="*"/>
                            <DataGridTextColumn Header="Aktív felhasználók" Binding="{Binding ActiveUsers}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Content="User statisztika újratöltés" Command="{Binding LoadUserStatsCommand}" HorizontalAlignment="Right" Margin="0,10,0,0"/>
                </Grid>
            </TabItem>

            <!-- Lists Tab -->
            <TabItem Header="Listák">
                <Grid Margin="10">
                    <DataGrid ItemsSource="{Binding ListsByCategory}" AutoGenerateColumns="False" Margin="0,10">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Kategória" Binding="{Binding CategoryName}" Width="*"/>
                            <DataGridTextColumn Header="Összes lista" Binding="{Binding TotalLists}" Width="*"/>
                            <DataGridTextColumn Header="Teljesített listák" Binding="{Binding CompletedLists}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Content="Listastatisztika újratöltés" Command="{Binding LoadListStatsCommand}" HorizontalAlignment="Right" Margin="0,10,0,0"/>
                </Grid>
            </TabItem>

            <!-- Products Tab -->
            <TabItem Header="Termékek">
                <Grid Margin="10">
                    <DataGrid ItemsSource="{Binding ProductsByCategory}" AutoGenerateColumns="False" Margin="0,10">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Kategória" Binding="{Binding CategoryName}" Width="*"/>
                            <DataGridTextColumn Header="Összes termék" Binding="{Binding TotalProducts}" Width="*"/>
                            <DataGridTextColumn Header="Átlag ár" Binding="{Binding AveragePrice}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Content="Termékstatisztika újratöltés" Command="{Binding LoadProductStatsCommand}" HorizontalAlignment="Right" Margin="0,10,0,0"/>
                </Grid>
            </TabItem>
            <!-- Loading/Error Indicators -->
            <TextBlock Text="{Binding ErrorMessage}" 
                       Foreground="Red" 
                       Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Top" 
                       Margin="0,10"/>
            <TextBlock Text="Töltés..." 
                       Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Top" 
                       Margin="0,30"/>
        </TabControl>
    </Grid>
</UserControl>
